<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head th:replace="partials/elements :: head(title='User Profile')"></head>
<body>
<nav th:replace="partials/elements :: navbar"></nav>

<section class="container" id="content-area">
    <div class="container">
        <div class="row">
            <div class="col">
                <h1><span th:text="${user.getUsername()}"> </span> Profile</h1>
            </div>
            <div th:if="${isOwner}" class="col text-right">
                <a class="btn btn-danger" th:href="@{/profile/{userId}/edit (userId = ${usercontent.getId()})}">Edit
                    Profile</a>
                <a class="btn btn-danger" th:href="@{/update-password/{id} (id = ${user.getId()})}">Change
                    Password</a>
            </div>
        </div>
    </div>
    <section class="container">
        <h2>Details</h2>
        <ul class="list-group">
            <li class="list-group-item bg-transparent border-0">First Name: <span
                    th:text="${usercontent.firstName}"></span></li>
            <li class="list-group-item bg-transparent border-0">Last Name: <span
                    th:text="${usercontent.lastName}"></span></li>
            <li class="list-group-item bg-transparent border-0">UserName: <span th:text="${user.getUsername()}"></span>
            </li>
            <li class="list-group-item bg-transparent border-0">Email: <span th:text="${user.getEmail()}"></span></li>
            <li class="list-group-item bg-transparent border-0">Country: <span
                    th:text="${usercontent.getCountry()}"></span></li>
        </ul>
    </section>
    <section class="container">
        <h2>Stats</h2>
        <ul class="list-group">
            <!--                total reviews created -->
            <li class="list-group-item bg-transparent border-0">
                <span th:text="${reviews.size()}"></span> reviews written
            </li>
            <!--                total watchlists created -->
            <li class="list-group-item bg-transparent border-0">
                <span th:text="${usercontent.getWatchlists().size()}"></span> watchlists created
            </li>
            <!--                total journals written -->
            <li class="list-group-item bg-transparent border-0">
                <span th:text="${usercontent.getJournals().size()}"></span> journals penned
            </li>
            <!--                all likes received -->
            <li class="list-group-item bg-transparent border-0">
                <div class="likes">
                    <p>
                        <i class="fa fa-heart"></i>
                        <span th:text="${likes}"></span> likes received
                    </p>
                </div>
            </li>
        </ul>
    </section>
    <section class="container">
        <h3>Reviews</h3>
        <div th:each="review : ${reviews}">
            <p class="my-1">Reviewing:
                <a th:text="${review.getMediaItem().getTitle()}"
                   th:href="@{/movies/{imdb}(imdb=${review.getMediaItem().getImdb()})}"></a>
            </p>
            <p class="my-1">Title:
                <a th:text="${review.title}"
                   th:href="@{/reviews/show(imdb=${review.getMediaItem().getImdb()}, id=${review.getId()})}"></a>
            </p>
            <p class="mt-1 mb-2">Rating: <span th:text="${review.rating}"></span> / 5</p>
        </div>
        <h3>Watchlists</h3>
        <div th:each="collection : ${usercontent.getWatchlists()}">
            <a th:text="${collection.getTitle()}" th:href="@{/watchlist/{id}/show(id=${collection.id})}">title</a>
        </div>
        <h3>Journals</h3>
        <div th:each="journal : ${usercontent.getJournals()}">
            <a th:text="${journal.getTitle()}" th:href="@{/journals(id=${journal.id})}">title</a>
        </div>
    </section>
</section>
<th:block th:replace="partials/elements :: footer"></th:block>
</body>
</html>
