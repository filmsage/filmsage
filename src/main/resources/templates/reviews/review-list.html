<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="partials/elements :: head(title='All reviews')"></head>
<body>
<nav th:replace="partials/elements :: navbar"></nav>

<section class="container">
    <div th:switch="${for}">
        <h1 th:case="'movie'">All reviews for <a th:href="@{/movies/{imdb}(imdb=${movie.imdb})}" th:text="${movie.title}">Movie</a></h1>
        <h1 th:case="'user'">All reviews for <a th:href="@{/profile/{id}(id=${user.getId()})}" th:text="${user.getUser().getUsername()}">User</a></h1>
        <h1 th:case="all">All reviews</h1>
    </div>

    <section class="container" id="reviews-container">
        <div th:each="review : ${reviews}">
            <a th:href="@{/reviews/show(imdb=${review.getMediaItem().getImdb()},r=${review.id})}">
            <h2 th:text="'for ' + ${review.title}"></h2>
            </a>
            <a th:unless="${for == 'movie'}"
               th:href="@{/movies/{imdb}(imdb=${review.getMediaItem().getImdb()})}"
            >
                <h3 th:text="${review.getMediaItem().getTitle()}"></h3>
            </a>
            <p th:text="${review.body}"></p>
        </div>
    </section>
</section>

<th:block th:replace="partials/elements :: footer"></th:block>
</body>
</html>
